# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹MyTradeé¡¹ç›®çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

- ğŸ› BugæŠ¥å‘Šå’Œä¿®å¤
- âœ¨ æ–°åŠŸèƒ½å¼€å‘
- ğŸ“– æ–‡æ¡£æ”¹è¿›
- ğŸ§ª æµ‹è¯•ç”¨ä¾‹ç¼–å†™
- ğŸ’¡ åŠŸèƒ½å»ºè®®å’Œè®¨è®º

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿æ‚¨çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

- Python 3.11+
- Git
- Poetry (æ¨è) æˆ– pip

### 2. è·å–ä»£ç 

```bash
# Forké¡¹ç›®åˆ°æ‚¨çš„GitHubè´¦æˆ·
# ç„¶åå…‹éš†æ‚¨çš„Fork

git clone https://github.com/YOUR_USERNAME/mytrade.git
cd mytrade

# æ·»åŠ ä¸Šæ¸¸ä»“åº“
git remote add upstream https://github.com/ORIGINAL_OWNER/mytrade.git
```

### 3. è®¾ç½®å¼€å‘ç¯å¢ƒ

```bash
# ä½¿ç”¨Poetryå®‰è£…ä¾èµ– (æ¨è)
poetry install --dev

# æˆ–è€…ä½¿ç”¨pip
pip install -r requirements.txt
pip install -r requirements-dev.txt

# å®‰è£…pre-commité’©å­
pre-commit install
```

### 4. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python run_tests.py

# è¿è¡Œç‰¹å®šæµ‹è¯•
python test/test_signal_generator.py

# æ£€æŸ¥ä»£ç è´¨é‡
flake8 src/
black --check src/
isort --check-only src/
```

## ğŸ“‹ å¼€å‘æµç¨‹

### 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯

```bash
# ä»ä¸»åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯
git checkout main
git pull upstream main
git checkout -b feature/your-feature-name

# æˆ–è€…ä¿®å¤bug
git checkout -b fix/bug-description
```

### 2. å¼€å‘å’Œæµ‹è¯•

- åœ¨ç›¸åº”çš„æ¨¡å—ä¸­æ·»åŠ æˆ–ä¿®æ”¹ä»£ç 
- ç¡®ä¿ä»£ç ç¬¦åˆé¡¹ç›®çš„ç¼–ç è§„èŒƒ
- æ·»åŠ å¿…è¦çš„æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°ç›¸å…³æ–‡æ¡£

### 3. æäº¤ä»£ç 

```bash
# æ·»åŠ ä¿®æ”¹çš„æ–‡ä»¶
git add .

# æäº¤ä»£ç  (ä½¿ç”¨æ¸…æ™°çš„æäº¤ä¿¡æ¯)
git commit -m "feat: add new trading signal algorithm"

# æˆ–è€…ä¿®å¤bug
git commit -m "fix: resolve data fetching timeout issue"
```

### 4. æ¨é€å’Œåˆ›å»ºPull Request

```bash
# æ¨é€åˆ°æ‚¨çš„Fork
git push origin feature/your-feature-name

# åœ¨GitHubä¸Šåˆ›å»ºPull Request
```

## ğŸ¯ ä»£ç è§„èŒƒ

### Pythonç¼–ç é£æ ¼

æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å·¥å…·æ¥ä¿æŒä»£ç è´¨é‡ï¼š

- **Black**: ä»£ç æ ¼å¼åŒ–
- **Flake8**: ä»£ç æ£€æŸ¥
- **isort**: å¯¼å…¥æ’åº
- **mypy**: ç±»å‹æ£€æŸ¥

### ä»£ç æ ¼å¼åŒ–

```bash
# æ ¼å¼åŒ–ä»£ç 
black src/ test/

# æ’åºå¯¼å…¥
isort src/ test/

# æ£€æŸ¥ä»£ç è´¨é‡
flake8 src/ test/
mypy src/
```

### æäº¤ä¿¡æ¯è§„èŒƒ

ä½¿ç”¨çº¦å®šå¼æäº¤æ ¼å¼ï¼š

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

ç±»å‹ (type):
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤bug
- `docs`: æ–‡æ¡£æ›´æ”¹
- `style`: ä»£ç æ ¼å¼ä¿®æ”¹
- `refactor`: é‡æ„ä»£ç 
- `test`: æ·»åŠ æµ‹è¯•
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

ç¤ºä¾‹ï¼š
```
feat(trading): add momentum-based signal generator
fix(data): resolve akshare API timeout issue
docs(readme): update installation instructions
```

### ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£

- æ‰€æœ‰å…¬å…±å‡½æ•°å¿…é¡»æœ‰è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
- å¤æ‚é€»è¾‘éœ€è¦æ·»åŠ æ³¨é‡Šè¯´æ˜
- ä½¿ç”¨ç±»å‹æ³¨è§£æé«˜ä»£ç å¯è¯»æ€§

```python
def generate_signal(
    self, 
    symbol: str, 
    target_date: Optional[Union[str, date]] = None,
    lookback_days: int = 30,
    force_update: bool = False
) -> AnalysisReport:
    """
    ä¸ºæŒ‡å®šè‚¡ç¥¨ç”Ÿæˆäº¤æ˜“ä¿¡å·
    
    Args:
        symbol: è‚¡ç¥¨ä»£ç 
        target_date: ç›®æ ‡æ—¥æœŸï¼Œé»˜è®¤ä¸ºå½“å‰æ—¥æœŸ
        lookback_days: å›çœ‹å¤©æ•°ï¼Œç”¨äºè·å–å†å²æ•°æ®
        force_update: æ˜¯å¦å¼ºåˆ¶æ›´æ–°æ•°æ®
    
    Returns:
        åˆ†ææŠ¥å‘Šå¯¹è±¡ï¼ŒåŒ…å«äº¤æ˜“ä¿¡å·å’Œè¯¦ç»†åˆ†æ
        
    Raises:
        ValueError: å½“è‚¡ç¥¨ä»£ç æ— æ•ˆæˆ–æ•°æ®è·å–å¤±è´¥æ—¶
    """
```

## ğŸ§ª æµ‹è¯•æŒ‡å—

### æµ‹è¯•ç»“æ„

```
test/
â”œâ”€â”€ test_config.py              # é…ç½®ç®¡ç†æµ‹è¯•
â”œâ”€â”€ test_data_fetcher.py        # æ•°æ®è·å–æµ‹è¯•
â”œâ”€â”€ test_signal_generator.py    # ä¿¡å·ç”Ÿæˆæµ‹è¯•
â”œâ”€â”€ test_backtest_engine.py     # å›æµ‹å¼•æ“æµ‹è¯•
â”œâ”€â”€ test_interpretable_logger.py # æ—¥å¿—è®°å½•æµ‹è¯•
â”œâ”€â”€ test_full_system.py         # ç³»ç»Ÿé›†æˆæµ‹è¯•
â””â”€â”€ conftest.py                 # æµ‹è¯•é…ç½®å’Œfixture
```

### ç¼–å†™æµ‹è¯•

- ä¸ºæ–°åŠŸèƒ½ç¼–å†™å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹
- æµ‹è¯•åº”è¯¥è¦†ç›–æ­£å¸¸æƒ…å†µå’Œå¼‚å¸¸æƒ…å†µ
- ä½¿ç”¨mockæ¥éš”ç¦»å¤–éƒ¨ä¾èµ–
- æµ‹è¯•å‡½æ•°å‘½åè¦æ¸…æ™°æè¿°æµ‹è¯•ç›®çš„

```python
def test_signal_generator_basic_functionality():
    """æµ‹è¯•ä¿¡å·ç”Ÿæˆå™¨çš„åŸºæœ¬åŠŸèƒ½"""
    generator = SignalGenerator()
    report = generator.generate_signal("600519")
    
    assert report.symbol == "600519"
    assert report.signal.action in ["BUY", "SELL", "HOLD"]
    assert 0 <= report.signal.confidence <= 1
    assert len(report.detailed_analyses) > 0

def test_signal_generator_invalid_symbol():
    """æµ‹è¯•ä¿¡å·ç”Ÿæˆå™¨å¤„ç†æ— æ•ˆè‚¡ç¥¨ä»£ç çš„æƒ…å†µ"""
    generator = SignalGenerator()
    
    with pytest.raises(ValueError, match="Invalid symbol"):
        generator.generate_signal("INVALID")
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python run_tests.py

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
python -m pytest test/test_signal_generator.py -v

# è¿è¡Œç‰¹å®šæµ‹è¯•å‡½æ•°
python -m pytest test/test_signal_generator.py::test_basic_functionality -v

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
python -m pytest --cov=src/mytrade test/
```

## ğŸ“– æ–‡æ¡£è´¡çŒ®

### æ–‡æ¡£ç±»å‹

- **README.md**: é¡¹ç›®æ€»è§ˆå’Œå¿«é€Ÿå¼€å§‹
- **APIæ–‡æ¡£**: æ¨¡å—å’Œå‡½æ•°çš„è¯¦ç»†è¯´æ˜
- **æ•™ç¨‹**: ä½¿ç”¨ç¤ºä¾‹å’Œæœ€ä½³å®è·µ
- **å¼€å‘æ–‡æ¡£**: æ¶æ„è®¾è®¡å’Œå¼€å‘æŒ‡å—

### æ–‡æ¡£ç¼–å†™è§„èŒƒ

- ä½¿ç”¨æ¸…æ™°ç®€æ´çš„è¯­è¨€
- æä¾›å®Œæ•´çš„ä»£ç ç¤ºä¾‹
- ä¿æŒæ–‡æ¡£ä¸ä»£ç åŒæ­¥æ›´æ–°
- ä½¿ç”¨Markdownæ ¼å¼

## ğŸ› é—®é¢˜æŠ¥å‘Š

### æŠ¥å‘ŠBug

åœ¨æäº¤BugæŠ¥å‘Šå‰ï¼Œè¯·ï¼š

1. æ£€æŸ¥æ˜¯å¦å·²æœ‰ç›¸ä¼¼é—®é¢˜
2. å°è¯•ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬é‡ç°é—®é¢˜
3. æ”¶é›†å¿…è¦çš„é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—

BugæŠ¥å‘Šåº”åŒ…å«ï¼š

- **é—®é¢˜æè¿°**: æ¸…æ™°æè¿°é‡åˆ°çš„é—®é¢˜
- **é‡ç°æ­¥éª¤**: è¯¦ç»†çš„é‡ç°æ­¥éª¤
- **é¢„æœŸè¡Œä¸º**: æ‚¨æœŸæœ›çš„æ­£ç¡®è¡Œä¸º
- **å®é™…è¡Œä¸º**: å®é™…å‘ç”Ÿçš„æƒ…å†µ
- **ç¯å¢ƒä¿¡æ¯**: Pythonç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰
- **é”™è¯¯ä¿¡æ¯**: å®Œæ•´çš„é”™è¯¯å †æ ˆä¿¡æ¯

### åŠŸèƒ½å»ºè®®

åŠŸèƒ½å»ºè®®åº”åŒ…å«ï¼š

- **ç”¨ä¾‹æè¿°**: ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½
- **å»ºè®®æ–¹æ¡ˆ**: æ‚¨å¸Œæœ›å¦‚ä½•å®ç°
- **æ›¿ä»£æ–¹æ¡ˆ**: å…¶ä»–å¯èƒ½çš„å®ç°æ–¹å¼
- **ç›¸å…³èµ„æº**: ç›¸å…³æ–‡æ¡£æˆ–å‚è€ƒèµ„æ–™

## ğŸ“‹ å‘å¸ƒæµç¨‹

### ç‰ˆæœ¬å·è§„èŒƒ

ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å· (Semantic Versioning):

- **ä¸»ç‰ˆæœ¬å·**: ä¸å…¼å®¹çš„APIä¿®æ”¹
- **æ¬¡ç‰ˆæœ¬å·**: å‘åå…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢
- **ä¿®è®¢ç‰ˆæœ¬å·**: å‘åå…¼å®¹çš„bugä¿®å¤

### å‘å¸ƒæ£€æŸ¥æ¸…å•

å‘å¸ƒå‰ç¡®ä¿ï¼š

- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] CHANGELOGå·²æ›´æ–°
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°
- [ ] åˆ›å»ºå‘å¸ƒæ ‡ç­¾

## ğŸ¤ è¡Œä¸ºå‡†åˆ™

### æˆ‘ä»¬çš„æ‰¿è¯º

ä¸ºäº†è¥é€ ä¸€ä¸ªå¼€æ”¾å’Œå‹å¥½çš„ç¯å¢ƒï¼Œæˆ‘ä»¬æ‰¿è¯ºï¼š

- å°Šé‡ä¸åŒçš„è§‚ç‚¹å’Œç»éªŒ
- æ¥å—å»ºè®¾æ€§çš„æ‰¹è¯„
- å…³æ³¨å¯¹ç¤¾åŒºæœ€æœ‰åˆ©çš„äº‹æƒ…
- å¯¹å…¶ä»–ç¤¾åŒºæˆå‘˜è¡¨ç¤ºåŒç†å¿ƒ

### ä¸å½“è¡Œä¸º

ä¸å¯æ¥å—çš„è¡Œä¸ºåŒ…æ‹¬ï¼š

- ä½¿ç”¨æ€§åŒ–çš„è¯­è¨€æˆ–å›¾åƒ
- äººèº«æ”»å‡»æˆ–ä¾®è¾±/è´¬æŸçš„è¯„è®º
- å…¬å¼€æˆ–ç§ä¸‹çš„éªšæ‰°
- æœªç»è®¸å¯å‘å¸ƒä»–äººçš„ç§äººä¿¡æ¯

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœæ‚¨åœ¨è´¡çŒ®è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

- æŸ¥çœ‹ç°æœ‰çš„Issueså’Œæ–‡æ¡£
- åœ¨GitHubä¸Šåˆ›å»ºæ–°çš„Issue
- å‘é€é‚®ä»¶åˆ° team@mytrade.com
- åŠ å…¥æˆ‘ä»¬çš„è®¨è®ºç¾¤ç»„

## ğŸ™ æ„Ÿè°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºMyTradeé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼æ‚¨çš„è´¡çŒ®è®©è¿™ä¸ªé¡¹ç›®å˜å¾—æ›´å¥½ã€‚

---

å†æ¬¡æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼ğŸ‰